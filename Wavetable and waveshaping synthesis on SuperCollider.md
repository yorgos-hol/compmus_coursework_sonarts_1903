# Δημιουργία synths χρησιμοποιώντας τη wavetable synthesis ως αφετηρία και τεχνικές waveshaping ως μέσο
### Γιώργος Χωλόπουλος, 4/4/2019
## Σύνοψη

Η παρούσα εργασία στοχεύει στην αναζήτηση μεθόδων χρήσης κυματομορφών που είναι αποθηκευμένες σε δείγματα. Οι μέθοδοι που χρησιμοποιήθηκαν τελικά ήταν η καταχώρησή τους σε wavetables και η χρήση τους ως σειρές τιμών διαμόρφωσης άλλου ηχητικού σήματος (waveshaping technique). Η διαδικασία αυτή γίνεται στο πλαίσιο δημιουργίας διάφορων synths, με γνώμονα τον πειραματισμό πάνω στον ηχητικό σχεδιασμό. Ο σχεδιασμός ήχων μέσω plug-ins  είναι μία διαδικασία με την οποία είμαι εξοικειωμένος, ωστόσο στο περιβάλλον του κώδικα SuperCollider απαιτεί κατανόηση μαθηματικών λειτουργιών και λογικής ως η ιεράρχηση και επιλογή ενεργειών και προγραμματισμού συλλογισμών. Επομένως, ο κώδικας τον οποίο συνοδεύει το παρόν κείμενο αποτελεί μία πρώτη απόπειρα εξερεύνησης της λογικής ως μέθοδος παραγωγής ιδιαίτερων ήχων και, ειδικότερα στο τέλος, ήχων που φαίνεται να ακολουθούν τους νόμους της φυσικής (κρουστοί ήχοι). 

Ο κώδικας περιλαμβάνει μία μέθοδο συμπλήρωσης κυματομορφής η οποία διαβάζεται πλέον ως wavetable. Έπειτα όμως ως βάση χρησιμοποιούνται κυματομορφές αποθηκευμένες σε αρχεία και buffer. Αυτές λειτουργούν ως συναρτήσεις παραμόρφωσης άλλων σημάτων, εφόσον επιλέχθηκε η τεχνική waveshaping για την επεξεργασία των κυματομορφών, λόγω του άμεσου όγκου αλλαγών που επιφέρει στον ήχο σε συνδυασμό με κατάλληλες επιλογές modulation. Πριν την έξοδο του σήματος, σ'αυτό προστίθενται ορισμένα φίλτρα και περιβάλλουσες, καταλήγοντας, σε συνδυασμό όμως και με τη δόμηση των waveshaping synths, όπως αυτά θα αναλυθούν παρακάτω, σε μία μορφή χρονικά μεταβαλλόμενης σύνθεσης κυματομορφής (time-varying waveform synthesis). 

Οι κυματομορφές που αποθηκεύτηκαν σε buffers δημιουργήθηκαν με το πρόγραμμα Audacity, ενώ προβλέπεται και μέθοδος χρήσης οποιουδήποτε ηχητικού δείγματος ως κυματομορφή, καθώς η μέθοδος `Buffer.read` είναι προγραμματισμένη να διαβάζει 512 frames ή όποιον άλλο αριθμό δύναμης του 2 επιλέξουμε, καθιστώντας κάθε sample έτοιμο προς μετατροπή σε wavetable. Αυτό συμβαίνει γιατί στη wavetable synthesis είναι απαραίτητη η χρήση sample που έχουν αριθμό frames ίσο με αριθμό δύναμης του 2, εξαιτίας του modulo που χρησιμοποιεί η γεννήτρια (Bristow-Johnson 1996).

## Θεωρητική παρουσίαση των τεχνικών που χρησιμοποιήθηκαν

### Η μέθοδος σύνθεσης wavetable 

Ανήκει στις αλυσιδωτής/διαδοχικής μορφής τεχνικές σύνθεσης (concatenative synthesis), στις οποίες ηχητικά δείγματα ανατοποθετούνται στο χρονικό πεδίο (Misra & Cook 2009). Η τεχνική wavetable αναπαράγει επαναλαμβανόμενα πολύ μικρά ηχητικά δείγματα (μερικών εκατοντάδων sample frames) και διακρίνεται σε single wavecycle (ή Fixed-waveform Table-lookup Synthesis (Roads & Strawn 1996: 44-7)), multiple wavecycle, sampling and crossfading (Miranda 2002: 90-7). 

Πρέπει ωστόσο να σημειώσουμε ότι το crossfading χρησιμοποιείται συνήθως σε όλες αυτές σε μικρότερο ή μεγαλύτερο βαθμό - στην concatenative synthesis ένας παράγοντας είναι η απόσταση της διαδοχής (concatenation distance) από το ένα δείγμα στο άλλο, γεγονός που μας κατευθύνει στην εισαγωγή crossfading (Schwarz 2006). Γι αυτό και μία διαφορετική ταξινόμηση χωρίζει τη σύνθεση μέσω wavetable σε wavetable crossfading, στις οποίες ανήκουν οι παραπάνω υποκατηγορίες, και σε wavetable stacking. Η τελευταία είναι μία μορφή προσθετικής σύνθεσης (additive synthesis), η οποία κατασκευάζει υβριδικές ηχητικές υφές στοιβάζοντας πολλαπλά στρώματα κυματομορφών (πχ. 4-8 σε εμπορικά synths) με αποτέλεσμα την κατασκευή υβριδικών ηχητικών υφών (Tolonen, Välimäki & Karjalainen 1998: 13). 

Η κατηγορία μονού κύκλου κυματομορφής (single wavecycle) αναπαράγει μία μόνο αποθηκευμένη κυματομορφή. Η συχνότητα της επανάληψης δίνει στο σήμα το τονικό ύψος του. Δίνεται όμως η δυνατότητα επεξεργασίας του κύκλου, όπως για παράδειγμα η αντίστροφη αναπαραγωγή του μετά το τέλος της ευθείας αναπαραγωγής, μεγαλώνοντας έτσι το μήκος της. Η κατηγορία wavetable synthesis πολλαπλών κύκλων κυματομορφής, αντίθετα, μπορεί να χρησιμοποιήσει περισσότερα από ένα αρχεία κυματομορφών, τα οποία αποθηκεύονται στο ίδιο wavetable. Για παράδειγμα, μπορεί να χρησιμοποιείται διαφορετική κυματομορφή για κάθε τμήμα της περιβάλλουσας του τελικού ήχου (attack, decay, sustain, release). Η κατηγορία sampling αφορά αποκλειστικά μεγαλύτερης χρονικής διάρκειας δειγμάτων, η οποία επιτρέπει αλλεπάλληλους εσωτερικούς βρόχους εντός του sample για δημιουργία πιο περίπλοκων ηχηροτήτων. Η κατηγορία crossfading wavetable synthesis αναφέρεται στη σύνθεση ήχου βάσει μεταμόρφωσης από τον έναν ήχο στον άλλον, μέσω του σταδιακού crossfading από τη μία κυματομορφή στην άλλη, ή από μία ομάδα διαδοχικών κυματομορφών στην επόμενη, ή από το ένα μεγαλύτερης διάρκειας sample σε άλλο (Miranda 2002: 44-47). Η εργασία αυτή χρησιμοποιεί single wavecycle, αφού κάθε φορά επιλέγεται ένα αρχείο κυματομορφής, βασιζόμενη μετά στο waveshaping για τη δημιουργία μεταβαλλόμενων χρονικά ήχων. Ένας στόχος για επόμενες εργασίες είναι η υλοποίηση morphing wavetable synthesis.

Κρίνεται σκόπιμο να εξετάσουμε πώς ακριβώς καθορίζεται το τονικό ύψος σε ένα wavetable synth. Αυτό εξαρτάται από 1) το μήκος της κυματομορφής σε αριθμό samples (frames), 2) από τη συχνότητα δειγματοληψίας και 3) από το ρυθμό ανάγνωσης του sample (rate). Αν για παράδειγμα το 1) είναι 1000 samples, το 2) είναι 100000Hz και το 3) είναι 1, τότε το τονικό ύψος του σήματος στην έξοδο είναι 100 Hz, αφού 100000/1000 * 1 = 100. Η αλλαγή τονικού ύψους στις περισσότερες υλοποιήσεις γίνεται βάσει του rate, το οποίο στην πραγματικότητα είναι ένας αλγόριθμος που προσπερνάει συγκεκριμένες τιμές (frames) του table βάσει μίας αύξησης (phase increment) που προστίθεται στην εκάστοτε τοποθεσία του δείκτη αναπαραγωγής (index) στη φάση του wavetable. Επειδή το αποτέλεσμα της αριθμητικής πράξης που περιγράφει αυτός ο αλγόριθμος δεν είναι πάντα ακέραιος αριθμός, συνήθως τα wavetable synths λύνουν αυτό το πρόβλημα με τη λειτουργία της παρεμβολής (interpolation), που κάνει χρήση του crossfading, καθώς έχει τη δυνατότητα να εντοπίζει την κατάλληλη τιμή ανάμεσα στις υπάρχουσες τιμές, για να αναπαράξει την τιμή που δίνει το phase index increment. Αυτό έχει ως αποτέλεσμα την υψηλότερη ακουστική ποιότητα ακόμη κι αν το μήκος της wavetable είναι πολύ μικρό (πράγμα που σημαίνει ότι χωρίς interpolation θα υπήρχε ανακρίβεια στις τιμές, δηλαδή παραμόρφωση (θόρυβος) (Roads & Strawn 1996: 93-95). 

Η μέθοδος σύνθεσης αυτή χρησιμοποιείται κατά κόρον γιατί είναι φθηνή υπολογιστικά, καθώς δε ξοδεύει υπολογιστική ισχύ για να υπολογίσει σε κάθε κύκλο τις τιμές της έντασης του σήματος, εκμεταλλευόμενη τη φύση των τονικά σαφών ήχων που στηρίζεται στην ταχεία επανάληψη κυμάτων. Παρόμοια, η τεχνική αυτή αποθηκεύει τις τιμές ενός κύκλου και τις επαναλαμβάνει.

### Η τεχνική waveshaping 

Ή αλλιώς τεχνική μη γραμμικής παραμόρφωσης (nonlinear distortion) ανήκει στις τεχνικές σύνθεσης διαμόρφωσης (modulation synthesis) και στις μη γραμμικές τεχνικές σύνθεσης και επεξεργασίας, στην οποία το σήμα περνάει μέσα από ένα "κουτί παραμόρφωσης", που περιέχει μία συνάρτηση υπό μορφή παράταξης (array ή αλλιώς table). Τη συνάρτηση μεταφοράς για τον τρόπο ανάγνωσης της αρχικής κυματομορφής που αποτελεί το λεγόμενο κουτί δίνει μία άλλη κυματομορφή. Με άλλα λόγια, η πορεία της δεύτερης κυματομορφής (η αλληλουχία των τιμών της) αποτελεί την πορεία του δείκτη (pointer) αναπαραγωγής της κυματομορφής εισόδου. Αυτό σημαίνει ότι η κυματομορφή διαβάζεται όχι μόνο προς μία κατεύθυνση, έχοντας σαν αποτέλεσμα τη μη γραμμική (μη αναστρέψιμη) παραμόρφωση του σήματος, οι παράμετροι της οποίας εξαρτώνται άμεσα από αυτή τη δεύτερη κυματομορφή. Για την καλύτερη κατανόηση της τεχνικής, ένα παράδειγμα συνάρτησης μεταφοράς (ή διαμόρφωσης) είναι η γραμμική συνάρτηση, στην οποία το σήμα δεν παραμορφώνεται καθόλου, αλλά μεταφέρεται αυτούσιο στην έξοδο. Η γραφική αναπαράστασή της είναι μία διαγώνιος ευθεία γραμμή που ξεκινάει στο -1 της έντασης και καταλήγει στο 1. (Cook 2002: 109, 115-6; Roads & Strawn 1996: 252).

Ιστορικά, τα πρώτα πειράματα σ'αυτή την κατεύθυνση έγιναν από τον Jean Claude Risset το 1969 στα Bell Telephone Laboratrories (ibid: 252), ενώ τη μέθοδο εξέλιξαν ανεξάρτητα και οι Arfib (1979) και Le Brun (1979) εκμεταλλευόμενοι τις ιδιότητες των πολυωνύμων Chebyshev (χρησιμοποιώντας τα ως συναρτήσεις δημιουργίας σήματος-παραμορφωτή) που μπορούν να οδηγήσουν σε τελικό σήμα τιμής του γινομένου του αριθμού τάξης του πολυωνύμου επί τη συχνότητα του αρχικού σήματος (1998: 19). Τα πλεονεκτήματα της χρήσης τέτοιων πολυωνύμων είναι αρχικά ότι, όπως με τη χρήση κάθε συγκεκριμένης μαθηματικής συνάρτησης, μπορείς να προβλέψεις το αποτέλεσμα, καθώς επίσης ότι το γινόμενο που προαναφέρθηκε παράγει συγκεκριμένες αρμονικές ανάλογα με την τάξη του πολυωνύμου. Τέλος, το τελικό σήμα μπορεί να υπολογιστεί έτσι ώστε να μην περιέχει ανεπιθύμητες συχνότητες άνω της συχνότητας Nyquist (Roads & Strawn 1996: 256).

Και η δεύτερη μέθοδος σύνθεσης της οποίας γίνεται χρήση εδώ δεν έχει καθόλου υψηλές υπολογιστικές απαιτήσεις, ενώ ταυτόχρονα επιτυγχάνει εύκολα μεγάλες φασματικές μεταβολές μόνο με τη μεταβολή της έντασης του σήματος, ιδιότητα που φέρουν και πολλοί ήχοι του φυσικού περιβάλλοντος. Ο αρμονικός πλούτος του φασματικού περιεχομένου αυξάνεται ανάλογα με την ένταση της δεύτερης συχνότητας. (Miranda 2002: 38-9). Τα δύο παραπάνω χαρακτηριστικά της σύνθεσης αυτής την καθιστούν πολύ ελκυστική για τη δημιουργία και προσομοίωση ήχων ακουστικών μουσικών οργάνων, και, πιο συγκεκριμένα, χάλκινων πνευστών (Smyth 2012).

Στον κώδικα που παρουσιάζεται σ'αυτήν την εργασία, εφαρμόζεται μία άτυπη μορφή της λεγόμενης movable waveshaping synthesis (Roads & Strawn 1996: 259). Περιγράφεται ως άτυπη, γιατί η κυματομορφή που αλλάζει στο χρονικό πεδίο είναι η αρχική, και όχι η δεύτερη, καθώς υπάρχει ένας δείκτης ο οποίος καταδεικνύει το σημείο της  που θα αναδιαμορφωθεί από το δεύτερο σήμα, και ο οποίος μάλιστα αλλάζει θέση με πρωτοβουλία του χειριστή σε πραγματικό χρόνο. Ακόμη όμως κι αν αφαιρέσουμε από την εξίσωση αυτή τη διαδραστικότητα, αρκετοί από τους δείκτες που χρησιμοποιήθηκαν προκαλούν μία πολυπλοκότητα στην κίνηση.

Το μειονέκτημα αυτής της τεχνικής (όπως και κάθε τεχνικής waveshaping) είναι ότι η δυναμική περιοχή του τελικού σήματος είναι μεγάλη και η ένταση αρκετά ασταθής (ibid: 257). Στην παρούσα εργασία έγινε μία απόπειρα χρησιμοποίησης συμπιεστή και διαστολέα του σήματος (`Compander` και `CompanderD`), αλλά απορρίφθηκε, λόγω προσωπικής προτίμησης του ωμού, πιο λεπτομερούς ήχου, με την απαραίτητη τελικά όμως προσθήκη Limiter.

Ο κώδικας που περιγράφεται εδώ βασίζεται σε unit generators (UGens), γεννήτριες οι οποίες είναι είτε σήματος είτε τροποποιητή σήματος (πχ. ηχητικού σήματος ή μίας περιβάλλουσας).

### Ειδικές επισημάνσεις για τον κώδικα 

Σ'αυτό το σημείο πρέπει να σημειωθεί ότι κάποιες μέθοδοι συμπλήρωσης wavetable δεν εφαρμόστηκαν στην παρούσα εργασία, καθώς προτιμήθηκε η διαισθητικότερη παραγωγή κυματομορφών, αλλά κυρίως η χρήση συγκεκριμένων sample. Μία μη περιλαμβανόμενη μέθοδος είναι ο προγραμματισμός κυματομορφής μέσω envelope generator στο SuperCollider. Παράδειγμα: 
````
(
~env = Env.new(
	{rrand(-1.0,1.0)}!11,
	{exprand(0.001,3)}!10,
	{rrand(-3.0,6.0)}!10
	
);
)

~env.plot;
````
Σημ.: για τις ψευδοτυχαίες τιμές διαρκειών επιλέχθηκε το exprand γιατί καταλήγει σε αλλαγές που συμβαίνουν σε όχι υπερβολικά γρήγορο ρυθμό - κάτι που δε θα γινόταν άλλωστε εμφανώς φανερό ακουστικά, ή τουλάχιστον θα ήταν αναποτελεσματικό, πέραν μίας επιπλέον εισαγωγής θορύβου)

Κάτι που αποφεύχθηκε είναι το γράψιμο συνάρτησης μεταφοράς βάσει απόλυτα συγκεκριμένων, ήδη γνωστών και υπολογισμένων μαθηματικών υπολογισμών π.χ. παραγωγής ημιτονοειδούς κύματος (βλ. τριγωνομετρία, πολυώνυμα Chebyshev - για τα οποία μάλιστα υπάρχει έτοιμη μέθοδος για wavetable synthesis στο SuperCollider κτλ.). Παράδειγμα συμπλήρωσης ημιτονοειδούς σήματος:
````
(
~sig = Signal.newClear(513);
~sig.waveFill({
	arg x, y, i;
	sin(x)
}, 0, 4pi)
)

~sig.plot;
````
    
Σημ.: εδώ παρατηρούμε ότι γίνεται συμπλήρωση 513 frames. Το SuperCollider σε ανάλογες περιπτώσεις χρειάζεται `2.pow(rrand(1, 20))+1` (αριθμός-δύναμη του 2 + 1) frames.

## Αναλυτική παρουσίαση του κώδικα

#### (ΓΡΑΜΜΕΣ 2-16) 
Σε αντιδιαστολή με τις παραπάνω τεχνικές σύνθεσης κυματομορφής ως wavetable, χρησιμοποιήθηκε μία (ψευδο)τυχαιοποιημένη μέθοδος συμπλήρωσης τιμών για τις κυματομορφές που δε δημιουργήθηκαν μέσω audacity, όπως είναι η πρώτη. Ο κώδικας φυσικά προσφέρει τη δυνατότητα επιλογής του directory στο οποίο θα αποθηκευτούν οι κυματομορφές για την περαιτέρω χρήση τους αργότερα.

#### (26-74), (76-84) 
Οι δύο αυτές περίοδοι και ειδικότερα η πρώτη (25-72) αποτελούν βασικά σημεία του κώδικα, καθώς περιέχουν ορισμούς στους οποίους πρέπει να γίνει αποτίμηση (evaluation) ώστε να λειτουργήσουν τα υπόλοιπα μέρη του.

#### (26-44) 
Για την πιο βολική συστηματοποίηση της πλοήγησης και του τρόπου εισαγωγής εξωτερικών αρχείων επιλέχθηκε το class dictionary, μία υποκατηγορία `Collection`. Ο λόγος είναι ότι το `Dictionary`, σε αντίθεση με το `Array`, μπορεί να προγραμματιστεί έτσι ώστε να βλέπει όλους τους υποφακέλους ως "λήμματα"-values, των οποίων τα ονόματα καθίστανται ως symbols, κάνοντας τον εντοπισμό και την επιλογή αρχείων και φακέλων πολύ εύκολη. Επισημαίνεται εδώ ότι παρέχεται επιλογή του αριθμού frames που επιθυμούμε να αναπαράγονται από το buffer. Το εύρος από 1 έως 20 του παράγοντα τυχαιότητας που εισάγεται στον κώδικα με το `rrand` μπορεί να διατηρηθεί ως μία οδηγία των αριθμών που μπορούν να χρησιμοποιηθούν ως εκθέτες στη συγκεκριμένη λειτουργία, αν υπάρχει ανάγκη επιλογής συγκεκριμένου αριθμού και αποφυγής της τυχαιότητας.

#### (51-57) 
Tο πρώτο synth επιλέγει (όπως και όλα τα ακόλουθα) τυχαία μία από τις αποθηκευμένες σε buffers κυματομορφές, και φτιάχνει μία μελωδία που πατάει σε μία συγκεκριμένη μουσική σκάλα (από την ινδική raga Ahir Bhairav), ξεκινώντας από το midi number 60 και μετατρέποντας τις συγκεκριμένες σχέσεις με τη βάση 60 στην παραπάνω κλίμακα σε συχνότητες στις οποίες θα επαναλάβει την τυχαία επιλεγμένη κυματομορφή. Χρησιμοποιείται μία γεννήτρια περιβάλλουσας, η οποία αναλαμβάνει και να ελευθερώνει το synth μετά την ολοκλήρωσή της λειτουργίας της.

#### (60-74) 
Ακολουθεί ένας ορισμός προτύπου-μοτίβου (`Pattern`) χρήσης του παραπάνω synth και αυτής της σκάλας με κάποιες συναρτήσεις τυχαιότητας, άλλοτε εκθετικής (`Pexprand`) κι άλλοτε χωρίς κάποια τάση προτίμησης τιμών προς μία κατεύθυνση (π.χ. `Pwhite`).

#### (76-84) 
Ορίζεται το reverb, με μείωση της ενίσχυσης για αποφυγή ψαλιδισμού και με βάση την κατάλληλη δρομολόγηση των busses (είσοδοι-έξοδοι).

#### (87-91) 
Το πρώτο `Pattern` μπαίνει σε λειτουργία με επιλογή τερματισμού. Η γραμμή του reverb (βλ. γραμμή 89) περιλαμβάνει τον όρο `\addToTail`, ώστε να αποκλειστεί κάθε ενδεχόμενο λάθος ιεράρχησης και σειράς evaluation των γραμμών, σε περίπτωση τροποποίησης του κώδικα, καθώς το reverb χρειάζεται υπάρχον σήμα για να του προσθέσει την αντήχηση, οπότε πρέπει να αποτιμάται τουλάχιστον δεύτερο στη σειρά.

#### (95-96) 
Δεύτερο `Pattern` που επιτρέπει την απεικόνιση των τιμών που πραγματώνει σε πραγματικό χρόνο στο post window, πράγμα που βοηθάει, καθώς ακολουθεί έναν ιδιόρρυθμο αλγόριθμο παραγωγής αλληλουχίας παλμών. Συχνοτικά, όλοι οι ήχοι προέρχονται από μία όχι τελείως αυθαίρετη, σχεδόν αρμονική σειρά, καθώς επιλέγονται βάσει στρογγυλοποίησης.

#### (98-100) 
Επιπλέον ενδεικτικά προαιρετικά synths

#### (107-118) 
Το πρώτο synth που χρησιμοποιεί μία τυχαία επιλεγμένη κυματομορφή ως κυματομορφή παραμόρφωσης για τον `Shaper` που θα παράγει τελικά το κύριο σήμα. Ο (wave)`Shaper` στην πραγματικότητα καθορίζει τη σειρά με την οποία συγκεκριμένα τμήματα της κυματομορφής διαβάζονται σε συγκεκριμένες χρονικές στιγμές και για συγκεκριμένες χρονικές διάρκειες (με συγκεκριμένο ρυθμό), στη δική μας περίπτωση βάσει της αποθηκευμένης κυματομορφής που ορίζει με βάση τις δικές της τιμές (κατευθυντικότητα στο χρόνο και rate (frequency) ανάγνωσης) τις μόλις αναφερθείσες παραμέτρους. Η αποθηκευμένη κυματομορφή λειτουργεί έτσι ως συνάρτηση μεταφοράς του `index`. Μάλιστα ο τρόπος που λειτουργεί ο δείκτης (`index`) εδώ ελέγχεται από τη θέση του ποντικιού στον οριζόντιο άξονα, η οποία καθορίζει το τμήμα της κυματομορφής που κατατάσσεται στο δείκτης, αλλάζοντας τελικά δηλαδή την ένταση του σήματος. 

#### (124-140) 
Εδώ παρέχεται ένα πειραματικό, μινιμαλιστικό, ρυθμικό synth pattern (αν και χρησιμοποιεί τη `Routine` και όχι το `Pattern` για να δημιουργήσει τη μουσική φράση), που βασίζεται στην υπέρβαση των υπολογιστικών-αποθηκευτικών ορίων του συστήματος, και πιο συγκεκριμένα στο lag error. Μάλιστα, κάνει χρήση της εντολής ελέγχου ροής 'while loop' για την επανάληψη της `Routine`. Ο υπερβολικά μεγάλος αριθμός των iterations της αναπαραγωγής των αρχείων στα buffers δεν επιτρέπει στο σύστημα να πραγματοποιήσει όλες αυτές που ανήκουν στην ίδια γραμμή (π.χ. το `50.do`) την ίδια στιγμή, με αποτέλεσμα την αναπαραγωγή τους σε σειρά, σαν να επαναλαμβάνονται με μία σχεδόν σταθερή συχνότητα (η οποία υποθέτω θα είναι για το `50.do`: 50 * τη χρονική διάρκεια του sample + όσα msecs είναι το lag).

#### (143-160) 
Μία ακόμη χρήση iteration για την εκκίνηση 50 synths που χρησιμοποιούν την ίδια κατασκευή, αλλά άντληση ευρετηρίων (indexes) από μία εκτενή δεξαμενή διαφορετικών κυματομορφών, η καθεμία των οποίων δύναται να έχει συχνότητα που εντοπίζεται ανάμεσα σε ένα συγκεκριμένο κάθε φορά εύρος ή, συνήθως, συγκεκριμένη τιμή ανά κανάλι. Μιλώντας για κανάλια, η στερεοφωνική κατανομή του σήματος γίνεται βάσει του UGen `Splay`, που διασπείρει τα κανάλια κατά μήκος του στερεοφωνικού πεδίου. Ο αριθμός των καναλιών δεν είναι ίδιος με τον αριθμό των iterations. 

Επίσης, σε αυτό και σε όλα τα synths που ακολουθούν, υπάρχουν εναλλακτικές τιμές ή αλγόριθμοι για ορισμένα arguments και τα variables, τα οποία πρέπει να επιλεχθούν "απενεργοποιώντας" τη μη επιθυμητή επιλογή μέσω της μετατροπής της σε σχόλιο ('//' ή πληκτρολογώντας 'cmd+/' -mac- ή 'Ctrl+/' -windows-). Συγκεκριμένα σ'αυτήν την παράγραφο, υπάρχει και μία εναλλακτική επιλογή σε πειραματικό στάδιο, που καθιστά την επιλογή του buffer 'υποχείριο' της θέσης του ποντικιού, κάτι που δε λειτουργεί ως περιμένουμε, αλλά προξενεί ενδιαφέροντα clicks σε κάθε κίνηση του ποντικιού, και, προφανώς, ιδιαίτερα πλούσιο ήχο στην περίπτωση γρήγορου συρσίματός του.

#### (162-178 και μέχρι 261)
Η αρχή μιας σειράς από ορισμών synths, τα οποία διαδοχικά επιδέχονται τροποποιήσεις ή προσθήκες, διαμορφώνοντας διαφορετικό ηχητικό αποτέλεσμα. Αρχικά, ένα synth με resonant filter, του οποίου η resonant frequency ορίζεται σε πραγματικό χρόνο βάσει της ιχνηλάτησης των κορυφών της έντασης του σήματος που έρχεται από 5 ταλαντωτές. Αυτό οδηγεί σε ένα ουσιαστικά low pass resonant filter. Η ποιότητα του φίλτρου επιλέγεται τυχαία από τιμές που έχουν εύρος από 0.0000001 έως 0.00001. Εισάγεται και η κλάση `LeakDC` που αφαιρεί το dc offset, καθώς οι κυματομορφές που παράγονται δεν είναι ελεγχόμενες.

#### (182-199) 
Το synth `\detunwav`, διατηρώντας τη δομή του παραπάνω synth, είναι μία ειρωνική προσέγγιση του όρου detune, καθότι η παρέκκλιση γίνεται από έναν άγνωστο σε μας τονικό πυρήνα, ανάμεσα μάλιστα σε διάφορα ανεξάρτητα παρεκκλίνοντα τονικά κέντρα που επίσης είναι δύσκολο να εντοπιστούν από το αυτί, εφόσον υπάρχει και η συνεχής ηχητική αναδιαμόρφωση μέσω της κίνησης του ποντικιού. Πλέον, η συχνότητα φίλτρου που εντείνεται, αν και εξακολουθεί να ορίζεται από το amplitude follower, είναι σταθερά ψηλότερη, καθώς παρέχεται ένα μαξιλαράκι της τάξης 180 με 340 Hz. 

Η τιμή του detune είναι 0.1 (βλ. γραμμή 187), ενώ το spread, δηλαδή η περαιτέρω απομάκρυνση του κάθε ταλαντωτή τόσο από τον κεντρικό όσο και από τον αμέσως κοντινότερο στον κεντρικό - κάτι που εδώ, ειρωνικά πάλι, δεν υπάρχει, καθώς κάθε ταλαντωτής είναι ανεξάρτητος και έχει άλλο τονικό κέντρο - δημιουργείται με τη χρήση του counter `i`. Το vibrato, πιο μικροδομικά, και το πλάτος του detuning, πιο μακροδομικά (με μεγαλύτερη περίοδο), με την συμπερίληψη της πρόσθεσης στη συνάρτηση, καθορίζεται από το πλάτος της έντασης του `SinOsc`.

Το φίλτρο αποκτά χαμηλότερη τιμή ποιότητας (εδώ χρησιμοποιείται το αντίστροφο του q, bandwidth ratio, οπότε οι τιμές μεγαλώνουν), αφήνοντας αρκετά περισσότερες συχνοτικές ζώνες να περάσουν στον ακουστό χώρο, διατηρώντας όμως πάλι τον παράγοντα της τυχαιότητας.

Η ένταση του σήματος, δεδομένης της ανεξέλεγκτης φύσης ενός resonant φίλτρου, επιχειρείται να ελεγχθεί με τη χρήση του `.reciprocal` (της αντίστροφης τιμής), και με την προσθήκη δύο επιπλέον παραγόντων: της διαίρεσης της έντασης του σήματος στους 5 ταλαντωτές (που όμως αν το σκεφτούμε καλύτερα είναι 10 ή 11, με τα διπλά και τριπλά κανάλια), και της προσθήκης ενός μαξιλαριού.

#### (203-226) 
Το παραπάνω synth μετατρέπεται σε ένα πολυ-synth με πολυρυθμική υφή και μικρογεγονότα που συμβαίνουν στα διάφορα, κολλημένα το ένα στο άλλο, στρώματά του, δημιουργώντας έτσι ένα ηχητικό περιβάλλον. Εδώ, γίνεται εκμετάλλευση του modulation που κάνει το φερόμενο ως detune ως περίπλοκη περιβάλλουσα τονικού ύψους (pitch envelope). Ειδικότερα, οι δυνατές τιμές που μπορούν να έχουν οι δείκτες επηρεάζονται από τον αριθμό του ταλαντωτή, μέσω του counter `i`, κι από άλλες μαθηματικές ενέργειες, συμπεριλαμβανομένων της τετραγωνικής ρίζας, κλασμάτων, δυνάμεων κτλ. Δοκιμάστηκαν όλα τα είδη παραγωγής θορύβου χαμηλής συχνότητας που υπάρχουν στο SuperCollider. Μία ακόμη τροποποίηση είναι στον τρόπο που υπολογίζεται σε κάθε χρονική στιγμή η συχνότητα συντονισμού. Αυτή τη φορά προσδίδεται μία αρμονικότητα μέσω της στρογγυλοποίησης και της ταυτόχρονης ακρόασης του φίλτρου κάθε ταλαντωτή, αλλά και της επιλογής πιο υψηλών συχνοτικών περιοχών.

Στο συγκεκριμένο αλλά και στο επόμενο synth, οι δείκτες και η ενίσχυση του σήματος έχουν εναλλακτικές επιλογές. Το εναλλακτικό `index` παράγει πιο υψηλές συχνότητες και πιο γρήγορα και ευκρινή περάσματα μεταξύ τους. Οι επιλογές για την ενίσχυση συγκεκριμένα αφορούν την εξάρτησή της είτε από την εκάστοτε συχνότητα συντονισμού, είτε από την - αυτή είναι μη εναλλασσόμενη σε πραγματικό χρόνο - ποιότητα των φίλτρων του κάθε ταλαντωτή.
 
#### (232-258) 
Το τελευταίο synth παράγει ήχους πιο κοντά στη φύση των κρουστών οργάνων, ή και, με μικρές αλλαγές στις τιμές, μικρής διάρκειας υγρούς και λεπτούς ήχους με έντονη κίνηση, attack και resonance. Αυτό συμβαίνει λόγω της προσθήκης της γεννήτριας περιβάλλουσας στη διαμόρφωση του σήματος. Η σύντομη χρονικά φύση των συγκεκριμένων ταλαντωτών επιτρέπει την προσθήκη μεγαλύτερου αριθμού τους.

#### (266-270) 
Η τελευταία `Pattern` είναι μία τροποποίηση της πρώτης. Κεντρικό ρόλο σ'αυτήν έχει η κλάση `Pstutter`, που πραγματοποιεί έναν σταθερό αριθμό επαναλήψεων για κάθε τιμή στο key στο οποίο έχει ανατεθεί. Η επιλογή αυτής της λειτουργίας είχε ως στόχο την πρόκληση ενδιαφέροντος, δεδομένης της μονότονης πρώτης ύλης μας, που είναι ένας μονότονος χτύπος. Αυτό μπορεί να επιτευχθεί μέσω της επανάληψης, η οποία δημιουργεί υπό-patterns και αναγνωρίσιμα μοτίβα. 

Αυτή η `Pattern` επιβάλλεται να σημειωθεί ότι μπορεί να χρησιμοποιηθεί και από τα προηγούμενα synth, αν τους προστεθεί ένα `EnvGen` που επιτρέπει την απελευθέρωσή τους μετά το κλείσιμο της περιβάλλουσας μέσω του `doneAction: 2`, όπως γίνεται στο παραπάνω synth `\Hayperc`. Αυτό είναι κάτι που δε θα μπορούσε να γίνει χωρίς την απελευθέρωση των synths, λόγω του πεπερασμένου μεγέθους της μνήμης του συστήματος, αλλά και της φύσης των πιο προηγούμενων synths που πλησιάζει τον χαρακτήρα του drone (βλ. προβλήματα ευκρίνειας και έντασης).  

## Βιβλιογραφία

1.	Bristow-Johnson, R. 1996. Wavetable synthesis 101, a fundamental perspective. In *Audio Engineering Society Convention 101. Audio Engineering Society*. ResearchGate https://www.researchgate.net/publication/228992574_Wavetable_Synthesis_101_A_Fundamental_Perspective (accessed April 3, 2019).
2.	Cook, P. R. 2002. *Real sound synthesis for interactive applications*. AK Peters/CRC Press.
3.	Miranda, E. 2002. *Computer sound design: Synthesis techniques and programming with cdrom*. Focal Press.
4.	Misra, A., & Cook, P. R. 2009. *Toward Synthesized Environments: A Survey of Analysis and Synthesis Methods for Sound Designers and Composers*. In International Computer Music Conference, August 16-21,2009. Schulich School of Music of McGill University.
5.	Roads, C., & Strawn, J. 1996. *The computer music tutorial*. MIT press.
6.	Schwarz, D. 2006. Concatenative sound synthesis: The early years. *Journal of New Music Research*, 35(1), 3-22.
7.	Smyth, T. 2012. *CMPT 468: Lecture 9, Waveshaping Synthesis*. Computing Science, Simon Fraser University. Web Site: https://www.cs.sfu.ca/~tamaras/waveshapeSynth/waveshapeSynth.pdf (accessed 31 March, 2019).
8.	Tolonen, T., Välimäki, V., & Karjalainen, M. 1998. *Evaluation of modern sound synthesis methods*.

### Παραπομπές

1. Fieldsteel, Ε. 2017. *SuperCollider Live Stream 2017.08.02 Waveshaping, Wavetable Synthesis*. Streaming video. https://www.youtube.com/watch?v=q1VQAZKh6_8 (accessed March 13, 2019).




